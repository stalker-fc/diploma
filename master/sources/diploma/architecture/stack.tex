\subsection{\Large{Стек технологий}}
\addcontentsline{toc}{subsection}

Во время проектирования системы всегда возникает ряд вопросов,
связанных с выбором стека технологий для решения следующих задач.

\begin{enumerate}
    \item Реализация программного кода
    \item Хранение данных
    \item Развертывание
    \item Тестирование
    \item Логирование
    \item Документация
    \item Протоколы взаимодействия
\end{enumerate}

Рассмотрим каждую из задач более подробно и выберем технологию, которая наиболее подходит для её решения в нашем случае.

\noindent \textbf{1. Язык программирования}.

В качестве основного языка программирования был выбран \textit{Python 3.8}\cite{PythonReference}.
Самым ценным ресурсом при реализации нашей системы является время разработки. Python является языком программирования
с динамической типизацией, имеет простой синтаксис,
а также очень большую базу готовых библиотек для решения любых задач,
в том числе и математических. Одними из основных библиотек для работы с алгоритмами являются
\textit{numpy} и \textit{scipy}: \textit{numpy} предоставляет удобные механизмы для работы
с массивами любой размерности, а \textit{scipy} набор алгоритмов из различных областей математики.

Все эти преимущества позволяют, как быстро реализовывать функционал со стороны разработки, так и проводить проверку
разных алгоритмических гипотез за короткое время.

Такие недостатки Python, как невысокая скорость выполнения программ и избыточное потребление памяти, в нашем случае
не играют решающей роли\cite{PythonProsAndCons}.
В Ubuntu 20.04 LTS -- операционной системе, на которой ведется разработка, установлен по умолчанию Python 3.8, поэтому
была выбрана именно эта версия языка.

\noindent \textbf{2. Хранение данных}.

Данные, используемые в проекте, хорошо структурируемы и могут быть легко представлены в табличном виде.
Поэтому в качестве технологии для хранения данных будем использовать реляционную базу данных.
Так как проектирование генеральных планов напрямую связано с геоданными, необходимо учитывать и это требование.

В качестве технического решения предлагается связка \textit{PostgreSQL 12} и расширения для работы с геоданными
\textit{PostGIS 3.1}. PostgreSQL является популярным open-source решением в мире баз данных,
а PostGIS содержит большой набор функций для преобразований геоданных, что нам очень важно\cite{PostGIS}.

\noindent \textbf{3. Развертывание}.

Необходимо предусмотреть механизм автоматического развертывания.
В компании используется система управления git-репозиториями \textit{GitLab}.
В этой системе доступен набор инструментов CI/CD, позволяющих решить данные задачи. Он называется \textit{GitLab CI/CD}.
Современным стандартом развертывания и управлениями приложениями является технология контейнеризации
Docker\cite{Docker}.

Для объединения нескольких \textit{Docker}-контейнеров вместе можно воспользоваться средствами \textit{docker-compose}.
Более сложные инструменты оркестрации контейнеров, такие как \textit{kubernetes} нам не требуются, в силу того, что у нас
только один вычислительный сервер.

\noindent \textbf{4. Тестирование}.

Наша система состоит из нескольких компонентов. Поэтому нужно предусмотреть следующие виды тестирования\cite{ArtOfTesting}.
\begin{itemize}
    \item \textit{Модульное тестирование}. Для проверки корректности работы различных функций и методов.
    \item \textit{Функциональное тестирование}. Для проверки соответствия результатов методов бизнес-требованиям.
    \item \textit{Интеграционное тестирование}. Для проверки, что все компоненты системы работают согласованно.
\end{itemize}

\noindent \textbf{5. Логирование}.

Помимо логирования в коде, требуется подумать о системе сбора, агрегации и хранения логов.
Одним из лучших решений на рынке является ELK. Это решение состоит из трех компонентов: ElasticSearch для полнотекстового
поиска и аналитики, Logstash для сбора логов из приложений, Kibana для визуализации логов в веб-интерфейсе.

\noindent \textbf{6. Документация}.

Документацию имеет смысл писать только тогда, когда она действительно будет использоваться.
У нас таких случаев ровно два: документация API и документация математической библиотеки.

В первом случае, есть стандартные средства, как Swagger или GraphiQL,
которые позволяют автоматически генерировать документацию на основе модели данных.

Во втором случае требуется сгенерировать описание описание алгоритмов, используемых в программе.
Важная особенность в документировании алгоритмов заключается в том, что так как они зачастую очень сложны
в понимании только по текстовому описанию и требуют наличия иллюстраций. Это удобно делать в MarkDown- и LaTex-файлах.
Также нужно учесть, что в алгоритмах присутствует не только теоретическое обоснование, но и реализация, которая также
требует документации, но уже стандартными средствами разработки.

Чтобы объединить в себе два формата документации, теоретическую часть и реализацию,
воспользуемся инструментом Sphinx\cite{Sphinx}.

\noindent \textbf{7. Протоколы взаимодействия}.

В качестве основного протокола взаимодействия между сервисами будет использоваться
REST API over HTTP как легковесный и широко распространенный.
В качестве формата данных для передачи между веб-клиентом и сервером выберем JSON. Выберем его по следующим причинам:
\begin{itemize}
    \item Данный формат является человеко-читаемым и легко редактируется с помощью обычного текстового редактора,
    что в исследовательских задачах очень важно.
    \item В силу малого количества пользователей в системе, нам не требуется уделять особое внимание размеру
    передаваемых пакетов данных, что предоставляют бинарные форматы, такие как protobuf\cite{Protobuf}.
    \item Данный формат является очень популярным в индустрии и он имеет поддержку
    во всех современных языках программирования.
\end{itemize}


\noindent \textit{Итого} при разработке системы будут использоваться следующий стек технологий:
\begin{itemize}
    \item Операционная система \textit{Ubuntu 20.04 LTS}
    \item Язык программирования \textit{Python 3.8.12}
    \item База данных \textit{PostgreSQL 12} с расширением \textit{PostGIS 3.1}
    \item Веб-сервер \textit{nginx}
    \item Автоматическое развертывание \textit{Gitlab-CI}
    \item Контейнеризация \textit{Docker} и \textit{docker-compose}
    \item Документация \textit{OpenAPI} и \textit{LaTex}
    \item Система сборки логов \textit{ELK}
    \item Протоколы взаимодействия \textit{REST API over HTTP}
    \item Формат данных \textit{JSON}
\end{itemize}