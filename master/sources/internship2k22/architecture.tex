\section*{\large{Архитектура сервиса}}
\addcontentsline{toc}{section}{Архитектура сервиса}

На диаграмме размещения(см. рис\ \ref{pic:architecture__deployment-diagram}) расчетный сервис выделен голубым цветом.
\begin{figure}[H]
	\hspace*{-1 cm}\includegraphics[width=\textwidth]{images/architecture/deployment_diagram}
	\caption{Диаграмма размещения}
	\label{pic:architecture__deployment-diagram}
\end{figure}
\vskip 5 mm

Расчетный сервис представлен двумя компонентами: API, расчётным модулем и математической библиотекой \textbf{nd\_plan}.

\begin{figure}[H]
	\hspace*{-2.5 cm}\includegraphics[width=1.2\textwidth]{images/architecture/execution_classes_diagram}
	\caption{Диаграмма классов расчетного модуля}
	\label{pic:architecture__execution-classes-diagram}
\end{figure}

\vskip 5 mm
Основное ядро бизнес-логики проекта представлено на диаграмме классов(см. рис\ \ref{pic:architecture__classes-diagram}).
Основные классы и интерфейсы:
\begin{enumerate}
	\item \textit{ITilesCacheStorage} -- сервис, отвечающий за кэширование векторных тайлов.
	\item \textit{ITilesRenderer} -- сервис, отвечающий за рендеринг векторных тайлов.
	\item \textit{ITilesDataProvider} -- сервис, отвечающий за получение данных из внешних источников для рендеринга.
	\item \textit{ITilesRepository} -- оркестратор, отвечает за получение отрендеренных тайлов.
	Если тайла нет в кэше, то он с помощью \textit{ITilesDataProvider} получает данные для рендеринга, потом
	с помощью \textit{ITilesRenderer} рендерит тайлы, а после сохраняет их в кэш \textit{ITilesCacheStorage}.
	\item \textbf{TileInfo} -- хранит в себе координаты запрашиваемого тайла, а также уникальный идентификатор генплана.
	\item \textbf{TileData} -- хранит в себе сырые данные, запрошенные по \textbf{TileInfo}.
	Из сырых данных генерируется \textbf{MapboxVectorTile}.
	\item \textbf{TileConfiguration} -- хранит в себе параметры слоев, которые требуется получить из источника данных.
	\item \textbf{MapboxVectorTile} -- хранит в себе данные, соответствующие спецификации \textit{Mapbox Vector Tile 2.1}.
\end{enumerate}


\begin{figure}[H]
	\hspace*{-2.5 cm}\includegraphics[width=1.2\textwidth]{images/architecture/}
	\caption{Диаграмма классов API}
	\label{pic:architecture__api-classes-diagram}
\end{figure}
